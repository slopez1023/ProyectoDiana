# ๐ DIAGRAMA DE FLUJO DEL SISTEMA

## Flujo Principal de Datos

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ARCHIVO EXCEL                            โ
โ      RE-SM-01 Tablero de Control de Indicadores 2025.xls   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ         MรDULO: data_processing                     โ
    โ         Clase: ExcelDataLoader                      โ
    โ                                                     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  1. load_data()                          โ     โ
    โ  โ     - Lee archivo Excel                  โ     โ
    โ  โ     - Engine: xlrd                       โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  2. validate_structure()                 โ     โ
    โ  โ     - Verifica columnas requeridas       โ     โ
    โ  โ     - Valida tipos de datos              โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  3. clean_data()                         โ     โ
    โ  โ     - Elimina filas vacรญas               โ     โ
    โ  โ     - Normaliza valores numรฉricos        โ     โ
    โ  โ     - Maneja #DIV/0!, NA, etc.           โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  4. extract_indicators_data()            โ     โ
    โ  โ     - Estructura datos por indicador     โ     โ
    โ  โ     - Extrae valores mensuales           โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ           DATAFRAME LIMPIO + INDICADORES           โ
    โ  - df_processed: pandas.DataFrame                  โ
    โ  - indicadores_list: List[Dict]                    โ
    โ  - resumen: Dict (metadata)                        โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ         MรDULO: analysis                            โ
    โ         Clase: IndicatorAnalyzer                    โ
    โ                                                     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  1. clasificar_periodicidad()            โ     โ
    โ  โ     - Analiza frecuencia de datos        โ     โ
    โ  โ     - Identifica: Mensual, Trimestral... โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  2. analizar_tendencia()                 โ     โ
    โ  โ     - Regresiรณn lineal: y = mx + b       โ     โ
    โ  โ     - Calcula pendiente                  โ     โ
    โ  โ     - Clasifica: Crecimiento, Retroceso  โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  3. calcular_semaforo()                  โ     โ
    โ  โ     - Compara valor vs umbrales          โ     โ
    โ  โ     - Verde / Amarillo / Rojo            โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  4. detectar_anomalias()                 โ     โ
    โ  โ     - Z-score: (valor - ฮผ) / ฯ           โ     โ
    โ  โ     - Umbral: |Z| > 2.5                  โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  5. calcular_estadisticas()              โ     โ
    โ  โ     - Promedio, mediana, desv. est.      โ     โ
    โ  โ     - Mรญnimo, mรกximo, rango              โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ                    โผ                               โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โ  โ  6. generar_interpretacion()             โ     โ
    โ  โ     - Texto automรกtico descriptivo       โ     โ
    โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ              ANรLISIS COMPLETO                      โ
    โ  - analisis_list: List[Dict]                       โ
    โ     Cada anรกlisis contiene:                        โ
    โ     * periodicidad, tendencia, semaforo            โ
    โ     * estadisticas, anomalias                      โ
    โ     * interpretacion                               โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
                             โ             โ              โ
                             โผ             โผ              โผ
        โโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ
        โ  MรDULO: visualization โ  โ    MรDULO:   โ  โ   MรDULO:   โ
        โ  Clase: ChartGenerator โ  โ  dashboard   โ  โ  reporting  โ
        โ                        โ  โ  (Streamlit) โ  โ     PDF     โ
        โโโโโโโโโโฌโโโโโโโโโโโโโโโโ  โโโโโโโโฌโโโโโโโโ  โโโโโโโโฌโโโโโโโ
                 โ                          โ                 โ
                 โผ                          โผ                 โผ
    โโโโโโโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโโโโโโโ   โโโโโโโโโโโ
    โ  GRรFICOS PLOTLY     โ   โ  WEB INTERFACE     โ   โ  PDF    โ
    โ  ==================   โ   โ  ==============     โ   โ  ====   โ
    โ  1. Tendencia        โ   โ  Pรกginas:          โ   โ  Secciones:โ
    โ     Individual       โ   โ  - Inicio          โ   โ  1. Portadaโ
    โ                      โ   โ  - Explorar        โ   โ  2. Resumenโ
    โ  2. Comparativo      โ   โ  - Reportes        โ   โ  3. Periodicidadโ
    โ     Top N            โ   โ  - Acerca de       โ   โ  4. Tendenciasโ
    โ                      โ   โ                    โ   โ  5. Crรญticosโ
    โ  3. Semaforizaciรณn   โ   โ  Filtros:          โ   โ  6. Recomendacionesโ
    โ     (Pie Chart)      โ   โ  - Periodicidad    โ   โ         โ
    โ                      โ   โ  - Semรกforo        โ   โโโโโโโโโโโ
    โ  4. Tendencias       โ   โ  - Tendencia       โ
    โ     Mรบltiples        โ   โ  - Bรบsqueda        โ
    โ                      โ   โ                    โ
    โ  5. Estadรญsticas     โ   โ  Interactividad:   โ
    โ     Visuales         โ   โ  - Grรกficos vivos  โ
    โ                      โ   โ  - Filtros tiempo  โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโ   โ  - Exportaciรณn     โ
               โ               โโโโโโโโโโโโโโโโโโโโโโ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโ
    โ  ARCHIVOS HTML       โ
    โ  output/charts/      โ
    โ  - semaforizacion_   โ
    โ    general.html      โ
    โ  - comparativo_      โ
    โ    indicadores.html  โ
    โ  - tendencias_       โ
    โ    multiples.html    โ
    โ  - estadisticas_     โ
    โ    generales.html    โ
    โโโโโโโโโโโโโโโโโโโโโโโโ

               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโ
    โ  REPORTE PDF         โ
    โ  output/reports/     โ
    โ  Informe_Indicadores_โ
    โ  MIPG_[timestamp].pdfโ
    โโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Flujo de Ejecuciรณn del Usuario

```
    โโโโโโโโโโโโโโโโโโโโโโโ
    โ  USUARIO EJECUTA    โ
    โ   python main.py    โ
    โโโโโโโโโโโโฌโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ PASO 1: Cargar Datos        โ
    โ โ Lee Excel                 โ
    โ โ Valida estructura         โ
    โ โ Limpia datos              โ
    โ โฑ๏ธ Tiempo: 2-5 segundos      โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ PASO 2: Analizar            โ
    โ โ Clasifica periodicidad    โ
    โ โ Calcula tendencias        โ
    โ โ Aplica semaforizaciรณn     โ
    โ โ Detecta anomalรญas         โ
    โ โฑ๏ธ Tiempo: 5-10 segundos     โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ PASO 3: Generar Grรกficos    โ
    โ โ 4 grรกficos interactivos   โ
    โ โ Guardados en HTML         โ
    โ โฑ๏ธ Tiempo: 3-5 segundos      โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ PASO 4: Generar PDF         โ
    โ โ Reporte ejecutivo         โ
    โ โ Guardado en reports/      โ
    โ โฑ๏ธ Tiempo: 2-3 segundos      โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ PASO 5: Completado โ        โ
    โ Total: ~15-25 segundos      โ
    โ                             โ
    โ Siguiente: Ver dashboard    โ
    โ streamlit run dashboard.py  โ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Arquitectura Modular

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    SISTEMA MIPG                             โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ              CAPA DE PRESENTACIรN                     โ โ
โ  โ  - Dashboard Streamlit (Web UI)                       โ โ
โ  โ  - Reportes PDF (Documentos)                          โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                          โฒ                                  โ
โ                          โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ              CAPA DE VISUALIZACIรN                    โ โ
โ  โ  - ChartGenerator (Plotly)                            โ โ
โ  โ  - PDFReportGenerator (ReportLab)                     โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                          โฒ                                  โ
โ                          โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ           CAPA DE LรGICA DE NEGOCIO                   โ โ
โ  โ  - IndicatorAnalyzer                                  โ โ
โ  โ    * Clasificaciรณn de periodicidad                    โ โ
โ  โ    * Anรกlisis de tendencias                           โ โ
โ  โ    * Semaforizaciรณn                                   โ โ
โ  โ    * Detecciรณn de anomalรญas                           โ โ
โ  โ    * Estadรญsticas descriptivas                        โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                          โฒ                                  โ
โ                          โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ           CAPA DE ACCESO A DATOS                      โ โ
โ  โ  - ExcelDataLoader                                    โ โ
โ  โ    * Carga de archivos                                โ โ
โ  โ    * Validaciรณn                                       โ โ
โ  โ    * Limpieza                                         โ โ
โ  โ    * Transformaciรณn                                   โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                          โฒ                                  โ
โ                          โ                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ                CAPA DE DATOS                          โ โ
โ  โ  - Archivo Excel (.xls)                               โ โ
โ  โ  - Archivos procesados                                โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ              CAPA TRANSVERSAL                         โ โ
โ  โ  - Configuraciรณn (config.py)                          โ โ
โ  โ  - Utilidades (helpers.py)                            โ โ
โ  โ  - Logging (sistema_indicadores.log)                  โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## Interacciรณn Dashboard Web

```
    โโโโโโโโโโโโโโโโโโโโโโโโ
    โ  USUARIO ACCEDE AL   โ
    โ  http://localhost:   โ
    โ       8501           โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโ
               โ
               โผ
    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ  PรGINA: INICIO ๐                โ
    โ  ============================     โ
    โ  - Mรฉtricas generales            โ
    โ  - Grรกfico semaforizaciรณn        โ
    โ  - Grรกfico comparativo           โ
    โ  - Tendencias mรบltiples          โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโ
               โ
               โโโโโโโโโโโโโโโ
               โ             โ
               โผ             โผ
    โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ
    โ EXPLORAR ๐     โ  โ REPORTES ๐      โ
    โ =============   โ  โ ==============    โ
    โ                 โ  โ                  โ
    โ 1. Filtros:     โ  โ 1. Opciones:     โ
    โ    - Periodic.  โ  โ    - Incluir     โ
    โ    - Semรกforo   โ  โ      grรกficos    โ
    โ    - Tendencia  โ  โ    - Incluir     โ
    โ    - Bรบsqueda   โ  โ      stats       โ
    โ                 โ  โ                  โ
    โ 2. Lista de     โ  โ 2. Filtros:      โ
    โ    indicadores  โ  โ    - Semรกforos   โ
    โ                 โ  โ    - Top N       โ
    โ 3. Detalle:     โ  โ                  โ
    โ    - Grรกfico    โ  โ 3. Generar:      โ
    โ    - Stats      โ  โ    - Click botรณn โ
    โ    - Anomalรญas  โ  โ    - Descarga    โ
    โ    - Interpret. โ  โ      PDF         โ
    โโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ
```

---

**Nota:** Este diagrama muestra el flujo completo desde la carga del Excel hasta la generaciรณn de salidas visuales y reportes.
